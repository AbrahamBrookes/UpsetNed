[gd_scene load_steps=10 format=3 uid="uid://b6qqh2cfe7ybu"]

[ext_resource type="Script" uid="uid://dj05bq1y7q0ab" path="res://Main.gd" id="1_jbe4v"]
[ext_resource type="Script" uid="uid://dln6b7rnp1k2c" path="res://Scripts/Network/Bootstrap/ServerBootstrapper.gd" id="2_r0du0"]
[ext_resource type="Script" uid="uid://yald6h7s5cvk" path="res://Scripts/Network/Bootstrap/ClientBootstrapper.gd" id="3_cm0pq"]
[ext_resource type="Script" uid="uid://drn5jhcdhqg3v" path="res://Scripts/Network/Client/Client.gd" id="4_fos0i"]
[ext_resource type="Script" uid="uid://ea413p73jbg1" path="res://Scripts/Network/Server/Server.gd" id="5_3dxm6"]
[ext_resource type="Script" uid="uid://cvbf60l5g0b0y" path="res://PlayerSpawner.gd" id="6_3dxm6"]
[ext_resource type="Script" uid="uid://b4puit2xwerld" path="res://Scripts/Network/Server/ServerInputHandler.gd" id="6_lgr22"]
[ext_resource type="Shader" uid="uid://ck0x3yofbljku" path="res://ScreenShader.gdshader" id="8_trn2v"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_03owx"]
shader = ExtResource("8_trn2v")
shader_parameter/vignette_intensity = 0.4
shader_parameter/vignette_smoothness = 0.5
shader_parameter/vignette_color = Color(0, 0, 0, 1)

[node name="Main" type="Node" node_paths=PackedStringArray("server_bootstrapper", "client_bootstrapper", "world_root")]
script = ExtResource("1_jbe4v")
server_bootstrapper = NodePath("ServerBootstrapper")
client_bootstrapper = NodePath("ClientBootstrapper")
world_root = NodePath("WorldRoot")
metadata/_custom_type_script = "uid://dj05bq1y7q0ab"

[node name="ServerBootstrapper" type="Node" parent="." node_paths=PackedStringArray("server")]
script = ExtResource("2_r0du0")
server = NodePath("../Server")

[node name="ClientBootstrapper" type="Node" parent="." node_paths=PackedStringArray("world_root")]
script = ExtResource("3_cm0pq")
world_root = NodePath("../WorldRoot")

[node name="Client" type="Node" parent="." node_paths=PackedStringArray("world_root")]
script = ExtResource("4_fos0i")
world_root = NodePath("../WorldRoot")
metadata/_custom_type_script = "uid://drn5jhcdhqg3v"

[node name="Server" type="Node" parent="." node_paths=PackedStringArray("world_root", "player_spawner", "input_handler", "in_game_ui")]
script = ExtResource("5_3dxm6")
world_root = NodePath("../WorldRoot")
player_spawner = NodePath("../MultiplayerSpawner")
input_handler = NodePath("ServerInputHandler")
in_game_ui = NodePath("../CanvasLayer")
metadata/_custom_type_script = "uid://ea413p73jbg1"

[node name="ServerInputHandler" type="Node" parent="Server" node_paths=PackedStringArray("server")]
script = ExtResource("6_lgr22")
server = NodePath("..")
metadata/_custom_type_script = "uid://b4puit2xwerld"

[node name="WorldRoot" type="Node3D" parent="."]

[node name="MultiplayerSpawner" type="MultiplayerSpawner" parent="."]
_spawnable_scenes = PackedStringArray("uid://dnngs3f0x460f")
spawn_path = NodePath("../WorldRoot")
spawn_limit = 16
script = ExtResource("6_3dxm6")

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="ColorRect" type="ColorRect" parent="CanvasLayer"]
material = SubResource("ShaderMaterial_03owx")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2

[node name="letterboxing" type="Control" parent="CanvasLayer"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2

[node name="top" type="ColorRect" parent="CanvasLayer/letterboxing"]
custom_minimum_size = Vector2(0, 30)
layout_mode = 1
anchors_preset = -1
anchor_right = 1.0
anchor_bottom = 0.07700001
offset_bottom = -19.896004
grow_horizontal = 2
size_flags_vertical = 0
mouse_filter = 2
color = Color(0, 0, 0, 1)

[node name="bottom" type="ColorRect" parent="CanvasLayer/letterboxing"]
custom_minimum_size = Vector2(0, 30)
layout_mode = 1
anchors_preset = 12
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 0
size_flags_vertical = 0
mouse_filter = 2
color = Color(0, 0, 0, 1)

[connection signal="spawned" from="MultiplayerSpawner" to="MultiplayerSpawner" method="_on_spawned"]
